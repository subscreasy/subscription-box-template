<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>subscriptionBoxTemplate</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/fonts/ionicons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Actor">
    <link rel="stylesheet" href="assets/css/Bootstrap-Payment-Form.css">
    <link rel="stylesheet" href="assets/css/Footer-Dark.css">
    <link rel="stylesheet" href="assets/css/Login-Form-Clean.css">
    <link rel="stylesheet" href="assets/css/Navigation-with-Button.css">
    <link rel="stylesheet" href="assets/css/Pretty-Product-List.css">
    <link rel="stylesheet" href="assets/css/Product-Details.css">
    <link rel="stylesheet" href="assets/css/Profile-Card.css">
    <link rel="stylesheet" href="assets/css/Profile-Edit-Form-1.css">
    <link rel="stylesheet" href="assets/css/Profile-Edit-Form.css">
    <link rel="stylesheet" href="assets/css/Registration-Form-with-Photo.css">
    <link rel="stylesheet" href="assets/css/styles.css">

    <!-- external javascript-->
    <script src="bundle.js"></script>
    <script src="assets/js/custom.js"></script>

</head>

<body>
    <div>
        <nav class="navbar navbar-light navbar-expand-md navigation-clean-button">
            <div class="container"><a class="navbar-brand" href="#">Company Name</a><button class="navbar-toggler" data-toggle="collapse" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse"
                    id="navcol-1">
                    <ul class="nav navbar-nav mr-auto">
                        <li class="nav-item" role="presentation"><a class="nav-link active" href="#">First Item</a></li>
                        <li class="nav-item" role="presentation"><a class="nav-link" href="#">Second Item</a></li>
                        <li class="dropdown"><a class="dropdown-toggle nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" href="#">Dropdown </a>
                            <div class="dropdown-menu" role="menu"><a class="dropdown-item" role="presentation" href="#">First Item</a><a class="dropdown-item" role="presentation" href="#">Second Item</a><a class="dropdown-item" role="presentation" href="#">Third Item</a></div>
                        </li>
                    </ul><span class="navbar-text actions" id="loginSpan"> <a href="login.html" class="login">Log In</a><a class="btn btn-light action-button" role="button" href="signUp.html">Sign Up</a></span><span class="navbar-text" id="logoutSpan"><button class="btn btn-light" type="button" onclick="logout();">Logout</button></span>
                    <span
                        class="navbar-text" id="profileSpan"><a href="userProfile.html"><img src="assets/img/userIcon.png" width="35px" style="margin:10px;"></a></span>
                </div>
            </div>
        </nav>
    </div>
    <div class="container">
        <h1 class="text-center">Product Details</h1>
        <div class="row">
            <div class="col-md-7">
                <div class="row">
                    <div class="col-md-12"><img class="img-thumbnail img-fluid center-block" src="assets/img/videomicme.png"></div>
                </div>
                <div class="row">
                    <div class="col-6 col-sm-6 col-md-6"><img class="img-thumbnail img-fluid center-block" src="assets/img/videomic-me.gif"></div>
                    <div class="col-6 col-sm-6 col-md-6"><img class="img-thumbnail img-fluid center-block" src="assets/img/videomic-me.gif"></div>
                </div>
                <div class="row">
                    <div class="col-6 col-sm-6 col-md-6"><img class="img-thumbnail img-fluid center-block" src="assets/img/videomic-me.gif"></div>
                    <div class="col-6 col-sm-6 col-md-6"><img class="img-thumbnail img-fluid center-block" src="assets/img/videomic-me.gif"></div>
                </div>
            </div>
            <div class="col-md-5">
                <h1 id="product-name">Lorem Ipsum</h1>
                <p id="product-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse sollicitudin elit massa. Ca nostra, per inceptos himenaeos. Mauris malesuada rutrum magna. Phasellus maximus nunc eget massa euismod bibendum. Phasellus justo felis,
                    porttitor nec justo eu, vestibulum ultrices neque. Maecenas iaculis euismod tempor. Cras vel pellentesque nunc. Sed sit amet convallis dolor, eget dictum elit. Donec ut justo arcu. Vivamus tincidunt nibh ac sem lobortis semper. Cras
                    vulputate mattis euismod. Morbi accumsan leo in leo condimentum, tincidunt pretium dui scelerisque. Morbi mi dui, vehicula vel velit eget, mattis bibendum lectus. Integer iaculis libero at arcu laoreet aliquam. Cras at libero sapien.
                    Sed luctus erat sit amet est hendrerit faucibus. </p>

                <div class="text-center"><h2 class="text-center text-success" id="offer-price">&nbsp;318.00 TL</h2></div>
                <div class="row">
                    <div class="col-6">
                        <select class="form-control" id="purchase-type" onchange="updatePrice()"></select>
                    </div>
                    <div class="col-6">
                        <a class="btn btn-danger btn-md btn-block" role="button" href="paymentDetails.html"><i class="fa fa-cart-plus"></i> Sepete Ekle</a></div>
                    </div>
                </div>
            </div>

        </div>
    <div class="footer-dark">
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-md-3 item">
                        <h3>Services</h3>
                        <ul>
                            <li><a href="#">Web design</a></li>
                            <li><a href="#">Development</a></li>
                            <li><a href="#">Hosting</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-6 col-md-3 item">
                        <h3>About</h3>
                        <ul>
                            <li><a href="#">Company</a></li>
                            <li><a href="#">Team</a></li>
                            <li><a href="#">Careers</a></li>
                        </ul>
                    </div>
                    <div class="col-md-6 item text">
                        <h3>Company Name</h3>
                        <p>Praesent sed lobortis mi. Suspendisse vel placerat ligula. Vivamus ac sem lacus. Ut vehicula rhoncus elementum. Etiam quis tristique lectus. Aliquam in arcu eget velit pulvinar dictum vel in justo.</p>
                    </div>
                    <div class="col item social"><a href="#"><i class="icon ion-social-facebook"></i></a><a href="#"><i class="icon ion-social-twitter"></i></a><a href="#"><i class="icon ion-social-snapchat"></i></a><a href="#"><i class="icon ion-social-instagram"></i></a></div>
                </div>
                <p class="copyright">Company Name © 2017</p>
            </div>
        </footer>
    </div><div>
    <script>
        bodyOnLoad();
    </script>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/Profile-Edit-Form.js"></script>


    <script>
        var id = window.location.hash.substring(1);
        console.log("productId: " + id);

        var callback = function(error, product, response) {
            if (error) {
                console.error(error);
            } else {
                $("#product-name").html(product.name);
                $("#product-description").html(product.description);

                var offers = product.offers;

                // render drop-down
                for (i=0; i<offers.length; i++) {
                    var offer = offers[i];
                    console.log('Offer: ' + JSON.stringify(offer));

                    console.log("offer.purchaseType: " + offer.purchaseType);
                    var optionText;
                    if (offer.purchaseType === "ONCE") {
                        optionText = "Tek Seferlik";
                    } else {
                        var recurrence = offer.recurrence;
                        if (recurrence.recurrenceType === "WEEKLY") {
                            optionText = "Haftalık";
                        } else if (recurrence.recurrenceType === "MONTHLY") {
                            optionText = "Aylık";
                        }

                    }

                    $("#purchase-type").append("<option value='" + offer.id + "' data-offer-price='" + offer.price + "'>" + optionText + "</option>");
                    $("#offer-price").html(offer.price + " TL");
                }
            }
        };

        function updatePrice() {
            console.log($("#purchase-type").val());
            var price = $("#purchase-type").find(":selected").data("offer-price");
            $("#offer-price").html(price + " TL");
        }

        productResourceApi.getCompanyProductUsingGET(companyName, id, callback);
    </script>
</body>

</html>